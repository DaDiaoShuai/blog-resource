---
title: JavaScript之事件循环机制
date: 2019-11-20 23:50:25
tags: js
---
### 前戏
众所周知，`JavaScript`作为一门单线程的非阻塞的脚本语言，起初设计的目的是为了运行在浏览器里进行交互的。我们来提取一下关键字「单线程」、「非阻塞」。

**单线程**，顾名思义，`JavaScript`代码在执行的时候，有且只有一个主线程来承担所有的处理任务。单线程在保证代码的执行顺序的时候又限制了代码的效率，所以又有另一门技术诞生--`web worker`，这使得`JS`成为了一门多线程语言。但是`web worker`也有很多限制，与其他多线程语言的多线程又有所不同，譬如说，`web worker`开启的其他线程都受制于主线程，不能独立执行，这些「线程」看起来就是主线程的子线程，而且，这些「线程」没有进行`I/O`操作的权限，只能为主线程分担一些类似计算的任务。所以说这些「线程」像是阉割版的线程，并不具备完成的功能，因此这项技术的诞生并不能改变`JS`单线程语言的本质特点。

**非阻塞**，为什么单线程又非阻塞呢？这就要归功于`JS`天生异步的特点了(关于js异步的问题会在单独文章里总结)。非阻塞就是当执行到异步任务的时候，主线程会**挂起**这个任务，然后在异步任务返回结果的时候再按照一定的规则去执行相应的回调。故而并不会阻塞主线程的执行。那么，`JS`引擎是如何实现「非阻塞」的呢？下面就上今天的主菜，事件循环 Event Loop。

### 主菜
